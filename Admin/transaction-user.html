<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>Bảng Quản Lý Người Dùng</title>
    <link rel="shortcut icon" type="image/x-icon" href="../User/images/favicon-user.ico">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="assets/css/feathericon.min.css">
    <link rel="stylesheet" href="assets/plugins/morris/morris.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

</head>

<body>
<div class="main-wrapper">


    <div class="header">
        <div class="header-left">
            <a href="../Admin/user.html" class="logo"> <img src="assets/img/anhdaidien.jpg" width="50" height="70" alt="logo"> <span class="logoclass">Bán căn hộ</span> </a>
            <a href="../Admin/user.html" class="logo logo-small"> <img src="assets/img/anhdaidien.jpg" alt="Logo" width="30" height="30"> </a>
        </div>
        <a href="javascript:void(0);" id="toggle_btn"> <i class="fe fe-text-align-left"></i> </a>
        <a class="mobile_btn" id="mobile_btn"> <i class="fas fa-bars"></i> </a>
        <ul class="nav user-menu">
            <li class="nav-item dropdown noti-dropdown">
                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown"> <i class="fe fe-bell"></i> <span class="badge badge-pill">3</span> </a>
                <div class="dropdown-menu notifications">
                    <div class="topnav-dropdown-header"> <span class="notification-title">Thông báo</span> <a href="javascript:void(0)" class="clear-noti"> Xóa tất cả  </a> </div>
                    <div class="noti-content">


                        <ul class="notification-list">
                            <li class="notification-message">
                                <a href="#">
                                    <div class="media"> <span class="avatar avatar-sm">
										<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/anhdaidien.jpg">
										</span>
                                        <div class="media-body">
                                            <p class="noti-details"><span class="noti-title">Giao dịch</span> của bạn <span class="noti-title">đã thành công!
												</span></p>
                                            <p class="noti-time"><span class="notification-time">1 phút trước</span> </p>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li class="notification-message">
                                <a href="#">
                                    <div class="media"> <span class="avatar avatar-sm">
										<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/anhdaidien.jpg">
										</span>
                                        <div class="media-body">
                                            <p class="noti-details"><span class="noti-title">  Đang xem xét
												</span> hộp đồng mua bán <span class="noti-title"> căn hộ 21 tỷ</span></p>
                                            <p class="noti-time"><span class="notification-time">1 ngày trước</span> </p>
                                        </div>
                                    </div>
                                </a>
                            </li>

                            <li class="notification-message">
                                <a href="#">
                                    <div class="media"> <span class="avatar avatar-sm">
										<img class="avatar-img rounded-circle" alt="User Image" src="assets/img/anhdaidien.jpg">
										</span>
                                        <div class="media-body">
                                            <p class="noti-details"><span class="noti-title">Chờ duyệt</span> đăng tin <span class="noti-title">bán căn hộ</span></p>
                                            <p class="noti-time"><span class="notification-time">4 ngày trước</span> </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>

                    </div>
                    <div class="topnav-dropdown-footer"> <a href="#">Xem tất cả</a> </div>
                </div>
            </li>


            <li class="nav-item dropdown has-arrow">
                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown"> <span class="user-img"><img class="rounded-circle" src="assets/img/anhdaidien.jpg" width="31" alt="Soeng Souy"></span> </a>
                <div class="dropdown-menu">
                    <div class="user-header">
                        <div class="avatar avatar-sm"> <img src="assets/img/anhdaidien.jpg" alt="User Image" class="avatar-img rounded-circle"> </div>
                        <div class="user-text">
                            <h6>Nhựt Quang</h6>
                            <p class="text-muted mb-0">Khách Hàng</p>
                        </div>
                    </div> <a class="dropdown-item" href="user.html">Hồ sơ của tôi</a> <a class="dropdown-item" href="../User/html/login.html">Đăng xuất</a> </div>
            </li>

        </ul>
    </div>



    <!-- danh mục -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-inner slimscroll">
            <div id="sidebar-menu" class="sidebar-menu">
                <ul>

                    <li> <a href="../Admin/user.html"><i class="fas fa-user"></i> <span>Hồ sơ của tôi</span></a> </li>

                    <li> <a href="../Admin/post.html"><i class="fas fa-cube"></i> <span>Tin đăng</span></a> </li>

                    <li> <a href="../Admin/notification.html"><i class="far fa-bell"></i> <span>Thông báo</span></a> </li>

                    <li> <a href="../Admin/transaction-user.html"><i class="far fa-money-bill-alt"></i> <span>Giao dịch</span></a> </li>

                    <li> <a href="../User/html/login.html"><i class="fa-solid fa-right-from-bracket"></i> <span>Đăng Xuất</span></a> </li>

                </ul>
            </div>
        </div>
    </div>

    <div class="page-wrapper">
        <div class="content container-fluid">
            <div class="page-header">
                <div class="row align-items-center">
                    <div class="col">
                        <h4 class="card-title float-left mt-2">Danh sách khách hàng</h4>
                        <button class="btn btn-primary float-right add-customer" data-toggle="modal" data-target="#customerForm" onclick="openForm()"> Thêm căn hộ</button>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="card card-table">
                        <div class="card-body booking_card">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover table-center mb-0">
                                    <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Căn hộ</th>
                                        <th>Người mua</th>
                                        <th>Số tiền giao dịch</th>
                                        <th>Phương thức giao dịch</th>
                                        <th>Thời gian giao dịch</th>
                                        <th>Trạng thái giao dịch</th>
                                        <th class="text-right">Hành động</th>
                                    </tr>
                                    </thead>
                                    <tbody id="houseTable">
                                    <!-- Dữ liệu mẫu -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Form thêm/cập nhật căn hộ -->
    <div class="modal" id="houseForm" tabindex="-1" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thông tin căn hộ</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" onclick="closeForm()"></button>
                </div>
                <div class="modal-body">
                    <form id="formHouse">
                        <input type="hidden" id="houseId">
                        <div class="mb-3">
                            <label for="houseName" class="form-label">Tên căn hộ</label>
                            <input type="text" class="form-control" id="houseName" required>
                        </div>
                        <div class="mb-3">
                            <label for="buyer" class="form-label">Người mua</label>
                            <input type="text" class="form-control" id="buyer" required>
                        </div>
                        <div class="mb-3">
                            <label for="amount" class="form-label">Số tiền giao dịch</label>
                            <input type="number" class="form-control" id="amount" required>
                        </div>
                        <div class="mb-3">
                            <label for="paymentMethod" class="form-label">Phương thức giao dịch</label>
                            <input type="text" class="form-control" id="paymentMethod" required>
                        </div>
                        <div class="mb-3">
                            <label for="transactionDate" class="form-label">Thời gian giao dịch</label>
                            <input type="date" class="form-control" id="transactionDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="status" class="form-label">Trạng thái giao dịch</label>
                            <select class="form-control" id="status">
                                <option value="Hoàn thành">Hoàn thành</option>
                                <option value="Đang xử lý">Đang xử lý</option>
                                <option value="Hủy bỏ">Hủy bỏ</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeForm()">Hủy</button>
                    <button class="btn btn-primary" onclick="saveData()">Lưu</button>
                </div>
            </div>
        </div>
    </div>
    <script>// Dữ liệu mẫu
    const houses = [
        { id: 1, name: "Căn hộ A", buyer: "Nguyễn Văn A", amount: 500000000, paymentMethod: "Chuyển khoản", transactionDate: "2023-12-01", status: "Hoàn thành" },
        { id: 2, name: "Căn hộ B", buyer: "Trần Thị B", amount: 700000000, paymentMethod: "Tiền mặt", transactionDate: "2023-12-02", status: "Đang xử lý" },
    ];

    let isEditing = false; // Xác định xem có phải đang chỉnh sửa không
    let currentEditId = null; // ID của dòng đang chỉnh sửa

    // Hiển thị dữ liệu mẫu
    function loadTable() {
        const table = document.getElementById("houseTable");
        table.innerHTML = "";
        houses.forEach((house) => {
            table.innerHTML += `
      <tr>
        <td>${house.id}</td>
        <td>${house.name}</td>
        <td>${house.buyer}</td>
        <td>${house.amount}</td>
        <td>${house.paymentMethod}</td>
        <td>${house.transactionDate}</td>
        <td>${house.status}</td>
        <td class="text-right">
          <button class="btn btn-sm btn-warning" onclick="editData(${house.id})">Cập nhật</button>
          <button class="btn btn-sm btn-danger" onclick="deleteData(${house.id})">Xóa</button>
        </td>
      </tr>
    `;
        });
    }

    // Hiển thị form
    function openForm() {
        isEditing = false;
        currentEditId = null;
        document.getElementById("formHouse").reset();
        document.getElementById("houseForm").style.display = "block";


    }

    // Đóng form
    function closeForm() {
        document.getElementById("houseForm").style.display = "none";
    }

    // Lưu dữ liệu
    function saveData() {
        const name = document.getElementById("houseName").value;
        const buyer = document.getElementById("buyer").value;
        const amount = document.getElementById("amount").value;
        const paymentMethod = document.getElementById("paymentMethod").value;
        const transactionDate = document.getElementById("transactionDate").value;
        const status = document.getElementById("status").value;

        if (isEditing) {
            const index = houses.findIndex((house) => house.id === currentEditId);
            houses[index] = { id: currentEditId, name, buyer, amount, paymentMethod, transactionDate, status };
        } else {
            const newId = houses.length > 0 ? houses[houses.length - 1].id + 1 : 1;
            houses.push({ id: newId, name, buyer, amount, paymentMethod, transactionDate, status });
        }

        closeForm();
        loadTable();
    }

    // Chỉnh sửa dữ liệu
    function editData(id) {
        isEditing = true;
        currentEditId = id;
        const house = houses.find((house) => house.id === id);
        document.getElementById("houseName").value = house.name;
        document.getElementById("buyer").value = house.buyer;
        document.getElementById("amount").value = house.amount;
        document.getElementById("paymentMethod").value = house.paymentMethod;
        document.getElementById("transactionDate").value = house.transactionDate;
        document.getElementById("status").value = house.status;
        document.getElementById("houseForm").style.display = "block";
    }

    // Xóa dữ liệu
    function deleteData(id) {
        const confirmDelete = confirm("Bạn có chắc chắn muốn xóa?");
        if (confirmDelete) {
            const index = houses.findIndex((house) => house.id === id);
            houses.splice(index, 1);
            loadTable();
        }
    }

    // Tải dữ liệu ban đầu
    loadTable();
    </script>

<script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="assets/js/jquery-3.5.1.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/moment.min.js"></script>
<script src="assets/js/select2.min.js"></script>
<script src="assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="assets/js/bootstrap-datetimepicker.min.js"></script>
<script src="assets/js/script.js"></script>
</div>
</body>
</html>